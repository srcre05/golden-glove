<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="teammatch.TeamMatchDAO">
	
	<!-- 매치 등록 -->
	
	<insert id="insertTeamMatch" parameterType="teammatchdto">
		insert into teammatching (homeName, region, possibleDate, possibleTime, homePlace, headCount, comment)
		values(#{homeName}, #{region}, #{possibleDate}, #{possibleTime}, #{homePlace}, #{headCount}, #{comment})
	</insert>

	<!-- 매치 검색 -->
	
	<select id="getTeamMatchList" parameterType="String" resultType="teammatchdto">
		select * from teammatching where region=#{region} and possibleDate=#{possibleDate} and awayName is null and registration=0
	</select>
	
	<!-- 매치 검색 (지역: 전체) -->
	
	<select id="getAllTeamMatchList" parameterType="String" resultType="teammatchdto">
		select * from teammatching where possibleDate=#{possibleDate} and awayName is null
	</select>
	
	<!-- 매치 신청 -->
	
	<update id="updateAwayName">
		update teammatching set awayName=#{awayName} where seq=#{seq}
	</update>
	
	<update id="updateRegistration">
		update teammatching set registration=1 where seq=#{seq}
	</update>
	
	
	<!-- 알림 -->
	<insert id="insertAlarm">
		insert into alarm (homeName, awayName, region, possibleDate, possibleTime, homePlace, alarmDate)
		values(#{homeName}, #{awayName}, #{region}, #{possibleDate}, #{possibleTime}, #{homePlace}, #{alarmDate})
	</insert>
	
</mapper>
