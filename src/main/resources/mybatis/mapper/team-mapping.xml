<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="team.TeamDAO">
	
	<!-- 팀원 등록 -->
	<insert id="insertTeam" parameterType="teamDTO">
		insert into team(teamId, teamName, firstBase, secondBase, thirdBase, catcher, pitcher, leftFielder, rightFielder, centerFielder, shortStop) values(#{teamId}, #{teamName}, #{firstBase}, #{secondBase}, #{thirdBase}, #{catcher}, #{pitcher}, #{leftFielder}, #{rightFielder}, #{centerFielder}, #{shortStop});
	</insert>
	
	<!-- 팀 생성 -->
	<update id="updateUserTeam" parameterType="teamDTO">
		update user set teamName = #{teamName} where id = #{teamId};
	</update>
	
	<!-- 팀원 조회 -->
	<select id="selectTeam" resultType="teamDTO" parameterType="String">
		select * from team where teamName = #{teamName};
	</select>
	
	<!-- 수정 -->
	<update id="updateTeam" parameterType="teamDTO">
		update team set teamName = #{teamName}, firstBase = #{firstBase}, secondBase = #{secondBase}, thirdBase = #{thirdBase}, catcher = #{catcher}, pitcher = #{pitcher}, leftFielder = #{leftFielder}, rightFielder = #{rightFielder}, centerFielder = #{centerFielder}, shortStop = #{shortStop} where teamId = #{teamId};
	</update>
	
	<!-- 팀이름 중복조회 -->
	<select id="selectTeamName" resultType="Integer" parameterType="String">
		select count(*) from team where teamName = #{teamName};
	</select>
	
	<!-- 팀원 추가 가입조회 -->
	<select id="selectUser" resultType="userDTO" parameterType="String">
		select * from user where id = #{id};
	</select>
	
	<!-- 팀아이디 조회 -->
	<select id="selectTeamId" resultType="String" parameterType="String">
		select teamId from team where teamName = #{teamId};
	</select>
	
	<!-- 팀탈퇴 -->
	<update id="exitTeamUser" parameterType="String">
		update user set teamName = null where id = #{id};
	</update>
	
	<update id="exitTeam" parameterType="HashMap">
		update team set ${position} = #{modiPosition} where teamName = #{teamName};
	</update>
	
	<!-- 포지션별 선수조회 -->
	<select id="selectPosition" resultType="String" parameterType="userDTO">
		select ${position} from team where teamName = #{teamName};
	</select>
</mapper>