<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="soldier.SoldierDAO">
	
	<!-- 용병 검색 1 -->
	
	<select id="getSoldierList1" parameterType="String" resultType="soldierdto">
		select * from soldier where acceptance is null order by possibleDate asc
	</select>
	
	<!-- 용병 검색 2 -->
	
	<select id="getSoldierList2" parameterType="String" resultType="soldierdto">
		select * from soldier where acceptance is null and possibleDate=#{possibleDate} order by possibleDate asc
	</select>
	
	<!-- 용병 검색 3 -->
	
	<select id="getSoldierList3" parameterType="String" resultType="soldierdto">
		select * from soldier where acceptance is null and position=#{position} order by possibleDate asc
	</select>
	
	<!-- 용병 검색 4 -->
	
	<select id="getSoldierList4" parameterType="String" resultType="soldierdto">
		select * from soldier where acceptance is null and position=#{position} and possibleDate=#{possibleDate} order by possibleDate asc
	</select>
	
	<!-- 용병 검색 5 -->
	
	<select id="getSoldierList5" parameterType="String" resultType="soldierdto">
		select * from soldier where acceptance is null and region=#{region} order by possibleDate asc
	</select>
	
	<!-- 용병 검색 6 -->
	
	<select id="getSoldierList6" parameterType="String" resultType="soldierdto">
		select * from soldier where acceptance is null and region=#{region} and possibleDate=#{possibleDate} order by possibleDate desc
	</select>
	
	<!-- 용병 검색 7 -->
	
	<select id="getSoldierList7" parameterType="String" resultType="soldierdto">
		select * from soldier where acceptance is null and region=#{region} and position=#{position} order by possibleDate asc
	</select>
	
	<!-- 용병 검색 8 -->
	
	<select id="getSoldierList8" parameterType="String" resultType="soldierdto">
		select * from soldier where acceptance is null and region=#{region} and position=#{position} and possibleDate=#{possibleDate} order by possibleDate asc
	</select>
	
	<!-- 용병 등록 -->
	
	<insert id="insertSoldier" parameterType="soldierdto">
		insert into soldier (region, position, possibleDate, soldierName, phone, email, teamName, fileName, winningRate, winCount, loseCount)
		values (#{region}, #{position}, #{possibleDate}, #{soldierName}, #{phone}, #{email}, #{teamName}, #{fileName}, #{winningRate}, #{winCount}, #{loseCount})	
	</insert>
	
	<select id="selectMylog" parameterType="String" resultType="int">
		select count(possibleDate) from soldier where possibleDate=#{possibleDate} and soldierName=#{soldierName}
		order by possibleDate asc
	</select>
	
	<!-- 용병 스카우트 제의 (팀 주장만) -->
	
	<update id="updateMateTeam">
		update soldier set mateTeam=#{userTeamName} where seq=#{seq}
	</update>
	
	<!-- 용병 로그 -->
	<select id="selectMySoldierLog" parameterType="String" resultType="soldierdto">
		select * from soldier where soldierName=#{userName} order by possibleDate asc
	</select>
	
	<select id="selectOffer" parameterType="String" resultType="soldierdto">
		select * from soldier where soldierName=#{userName} and acceptance is null order by possibleDate asc
	</select>
	
	<!-- 용병 로그 (스카우트 제의 수락하기 버튼) -->
	
	<update id="updateMateTeamAceptance">
		update soldier set acceptance=1 where seq=#{seq}
	</update>
	
	<update id="updateFinalMateTeam">
		update soldier set finalMateTeam=#{mateTeam} where seq=#{seq}
	</update>
	
	
	
	
	
	
</mapper>